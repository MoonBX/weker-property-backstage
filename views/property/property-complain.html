<div class="g-table-banner p-md b-b">
  <div class="tb-flex">

    <div class="item m-b-sm">
      <label class="w-label-control">投诉人: </label>
      <input type="text"
             class="form-control w-sm pull-left m-r-lg"
             ng-model="complainVm.selectList.proposerName">
    </div>

    <div class="item m-b-sm">
      <label class="w-label-control">联系方式: </label>
      <input type="text"
             class="form-control w-sm pull-left m-r-lg"
             ng-model="complainVm.selectList.proposerMobile">
    </div>

    <div class="item m-b-sm">
      <label class="w-label-control">投诉时间: </label>
      <input type="text"
             ng-model="complainVm.selectList.startTime"
             class="form-control w-sm pull-left m-r-xs bg-date"
             data-date-format="yyyy-MM-dd"
             data-date-type="number"
             data-min-date="02/10/86"
             data-max-date="{{complainVm.selectList.endTime||'today'}}"
             data-autoclose="1"
             bs-datepicker
             placeholder=""
      />
      <label class="pull-left datepicker-split">—</label>
      <input type="text"
             ng-model="complainVm.selectList.endTime"
             class="form-control w-sm pull-left m-r-lg bg-date"
             data-date-format="yyyy-MM-dd"
             data-date-type="number"
             data-max-date="today"
             data-min-date="{{complainVm.selectList.startTime}}"
             data-autoclose="1"
             bs-datepicker
             placeholder=""
      />
    </div>

    <div class="item m-b-md">
      <label class="w-label-control">处理状态: </label>
      <div class="w-sm pull-left m-r-lg">
        <select ui-select2
                ng-model="complainVm.selectList.status"
                data-placeholder="请选择处理状态"
                name="status">
          <option value=""></option>
          <option ng-value="0">未处理</option>
          <option ng-value="2">已处理</option>
        </select>
      </div>
    </div>

  </div>

  <div class="row text-center">
    <my-filter-button get-search="complainVm.getSearch(selectList, getList)"
                      clear-session="complainVm.clearSession()"
                      select-list="complainVm.selectList"
                      get-list="complainVm.getComplaintList">
    </my-filter-button>
  </div>
</div>


<div class="g-table-content m-t-md p-h-md">

  <table class="table table-striped wk-table">
    <thead>
    <th>投诉人</th>
    <th>联系方式</th>
    <th>地址</th>
    <th>投诉时间</th>
    <th>处理时间</th>
    <th>处理状态</th>
    <th>操作</th>
    </thead>
    <tr ng-repeat="item in complainVm.complainList">
      <td>{{item.proposerName}}</td>
      <td>{{item.proposerMobile}}</td>
      <td>{{item.location}}</td>
      <td>{{item.gmtCreated | date: 'yyyy-MM-dd'}}</td>
      <td>{{item.processTime | date: 'yyyy-MM-dd HH:mm'}}</td>
      <td>
        <span class="state-circle" ng-class="{'circle-red': item.status == '未处理', 'circle-green': item.status == '已处理', 'circle-orange': item.status == '处理中'}"></span>
        {{item.status}}
      </td>
      <td>
        <a ng-if="item.status == '未处理'" class="m-r-sm" ng-click="propertyVm.openModal('modal-alarm','announceAlarm as alarmVm', item)">
          处理
        </a>
        <span ng-if="item.status == '已处理' || item.status == '处理中'" class="m-r-sm a-disabled" href="javascript:;">
          处理
        </span>
        <a ng-click="propertyVm.openModal('modal-complain-detail', 'detailComplainCtl as detailVm', item)">
          详情
        </a>
      </td>
    </tr>
  </table>
</div>
<div class="m-t-lg text-center"
     ng-if="!complainVm.complainList.length">
  暂无数据
</div>
<my-pagination
  ng-if="complainVm.complainList.length"
  pages="complainVm.pages"
  page-active="page.active"
  is-first-page="complainVm.isFirstPage"
  is-last-page="complainVm.isLastPage"
  pages-num="complainVm.pagesNum"
  pages-total="complainVm.pagesTotal"
  page-skip="pageSkip"
  select-page="complainVm.selectPage(pageTag, pageNo)">
</my-pagination>

<div class="clearfix"></div>